<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex Client - The Ultimate Bloxd.io Client</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="assets/images/Vortex-Client-png(1).png">
    <meta property="og:title" content="Vortex Client">
    <meta property="og:description" content="The best PvP client for Bloxd.io, packed with features to enhance your gameplay.">
</head>
<body>

    <header class="top-bar">
        <div class="content-wrapper nav-wrapper">
            <div class="logo">
                <img src="assets/images/Vortex-Client-png(1).png" alt="Vortex Client Logo" class="logo-img">
                <a href="#" class="logo-text">Vortex Client</a>
            </div>
            <nav class="main-nav">
                <a href="#features">Features</a>
                <a href="#install">Install</a>
                <a href="#" class="btn btn-secondary" id="invite-button">Invite a Friend <i class="fas fa-copy"></i></a>
                <a href="https://discord.gg/NdpwX4FBaB" class="btn btn-secondary" target="_blank" rel="noopener noreferrer">Discord <i class="fab fa-discord"></i></a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero" class="hero-section glass-section">
            <div class="content-wrapper">
                <div class="hero-content">
                    <h1 id="hero-title">Vortex Client</h1>
                    <p id="hero-subtitle">The definitive PvP client for Bloxd.io, built for performance and style.</p>
                    <div class="hero-buttons">
                        <a href="#install" class="btn btn-primary">Download Now</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="features" class="features-section">
            <div class="content-wrapper">
                <h2>Client Features</h2>
                <div class="features-grid">
                    <div class="feature-card glass-container"><h4><i class="fas fa-fist-raised"></i> Keystrokes <span class="badge">Customizable</span></h4><p>Displays your movement keys and clicks on screen.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-eye"></i> Armour View <span class="badge">Customizable</span></h4><p>Shows your armor status and durability in real-time.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-mouse-pointer"></i> CPS Counter <span class="badge">Customizable</span></h4><p>Displays your current clicks per second (CPS).</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-signal"></i> Ping Counter <span class="badge">Customizable</span></h4><p>Shows your current ping to the server you are on.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-tools"></i> Resolution Adjuster</h4><p>Change your game resolution without needing to restart.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-video"></i> Cinematic Mode</h4><p>Enables smooth camera motion for cinematic shots.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-paint-brush"></i> Custom Nametags</h4><p>Customize the appearance of all player nametags.</p></div>
                    <div class="feature-card glass-container"><h4><i class="fas fa-user-astronaut"></i> Custom Cape</h4><p>Equip and display your very own personalized cape.</p></div>
                </div>
            </div>
        </section>

        <section id="install" class="install-section glass-section">
            <div class="content-wrapper">
                <h2>How to Install</h2>
                <div class="steps-container">
                    <div class="step-card glass-container"><div class="step-number">1</div><h3>Install Tampermonkey</h3><p>First, you need the Tampermonkey browser extension. <a href="https://www.tampermonkey.net/" target="_blank" rel="noopener noreferrer">Get it here.</a></p></div>
                    <div class="step-card glass-container"><div class="step-number">2</div><h3>Install the Userscript</h3><p>Click the button below to install the Vortex Client userscript from GitHub.</p></div>
                    <div class="step-card glass-container"><div class="step-number">3</div><h3>Play Bloxd.io</h3><p>That's it! Navigate to bloxd.io and the client will activate automatically.</p></div>
                </div>
                <a href="https://raw.githubusercontent.com/GEORGECR0/Vortex_Client_Code/main/Vortex_Client.user.js" id="install-button" class="btn btn-primary install-btn" target="_blank" rel="noopener noreferrer">Install Vortex Client</a>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="content-wrapper">
            <p>&copy; 2025 Vortex Client. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        // Import functions from the Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getFirestore, doc, runTransaction } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

        document.addEventListener('DOMContentLoaded', () => {
            
            // --- START: Referral System Logic ---

            const handleReferral = () => {
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.has('ref')) {
                    const heroTitle = document.getElementById('hero-title');
                    const heroSubtitle = document.getElementById('hero-subtitle');

                    if(heroTitle && heroSubtitle) {
                        heroTitle.textContent = "A Friend Invited You";
                        heroSubtitle.textContent = "Your friend is inviting you to check out Vortex Client. Click below to install!";
                    }
                }
            };

            const setupInviteButton = () => {
                const inviteButton = document.getElementById('invite-button');
                if (!inviteButton) return;

                inviteButton.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevents the link from navigating
                    const referralLink = `${window.location.origin}${window.location.pathname}?ref=friend`;
                    
                    navigator.clipboard.writeText(referralLink).then(() => {
                        const originalText = inviteButton.innerHTML;
                        inviteButton.innerHTML = 'Copied! <i class="fas fa-check"></i>';
                        setTimeout(() => {
                            inviteButton.innerHTML = originalText;
                        }, 2000); // Revert back after 2 seconds
                    });
                });
            };

            // Run the referral functions
            handleReferral();
            setupInviteButton();

            // --- END: Referral System Logic ---


            // --- START: Firebase Logic ---
            try {
                const firebaseConfig = {
                    apiKey: "AIzaSyDdbd6-EQHUD1uGcRvweIQA0O3QuSUHyW0",
                    authDomain: "vortex-web-database.firebaseapp.com",
                    projectId: "vortex-web-database",
                    storageBucket: "vortex-web-database.appspot.com",
                    messagingSenderId: "363017626211",
                    appId: "1:363017626211:web:c7d232d4078614be634e56",
                    measurementId: "G-H5ZPXB464M"
                };

                const app = initializeApp(firebaseConfig);
                const db = getFirestore(app);
                const installButton = document.getElementById('install-button');

                if (!installButton) return;

                installButton.addEventListener('click', async () => {
                    const countDocRef = doc(db, "stats", "downloads");
                    try {
                        await runTransaction(db, async (transaction) => {
                            const countDoc = await transaction.get(countDocRef);
                            if (!countDoc.exists() || typeof countDoc.data().count !== 'number') {
                                throw new Error("Document is missing or count is not a number.");
                            }
                            const newCount = countDoc.data().count + 1;
                            transaction.update(countDocRef, { count: newCount });
                        });
                    } catch (error) {}
                });
            } catch (error) {}
            // --- END: Firebase Logic ---
        });
    </script>
    </body>
</html>
